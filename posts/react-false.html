<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Falsy React Elements - Ben Coveney&#x27;s Blog</title><meta name="description" content="Why doesn&#x27;t React render false?"/><meta name="author" content="Ben Coveney"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#10141a"/><meta name="msapplication-TileColor" content="#10141a"/><meta name="theme-color" content="#10141a"/><link rel="canonical" href="https://bencoveney.com/posts/react-false.html"/><link href="https://cdn.materialdesignicons.com/2.2.43/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css"/><link rel="alternate" type="application/atom+xml" title="Ben Coveney&#x27;s Blog" href="/feed.xml"/><meta property="og:title" content="Falsy React Elements - Ben Coveney&#x27;s Blog"/><meta property="og:type" content="article"/><meta property="og:image" content="/posts/react-false-playground.png"/><meta property="og:url" content="https://bencoveney.com/posts/react-false.html"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:description" content="Why doesn&#x27;t React render false?"/><meta property="og:site_name" content="Ben Coveney&#x27;s Blog"/><style>.published-0-0-39{margin-top:1rem;font-style:italic;font-size:0.707em;text-align:center;width:100%;display:inline-block;}:root{--font-family-sans-serif:-apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto, arial, sans-serif;--font-family-serif:Iowan Old Style, Apple Garamond, Baskerville, Times New Roman, Droid Serif, Times, Source Serif Pro, serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, serif;--font-family-mono:Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace;--font-family-body:var(--font-family-sans-serif);--font-family-heading:var(--font-family-serif);--font-family-code:var(--font-family-mono);--background-color-dark:hsl(238, 6%, 4%);--foreground-color-dark:hsl(238, 6%, 50%);--background-color-medium:hsl(238, 6%, 8%);--foreground-color-medium:hsl(238, 6%, 57%);--background-color-light:hsl(238, 6%, 14%);--foreground-color-light:hsl(238, 6%, 86%);--highlight-color:rgb(180, 20, 20);--highlight-color-2:rgb(181, 105, 19);--pure-black:hsl(0, 0%, 0%);--fg-color:var(--foreground-color-light);--bg-color:var(--background-color-dark);--bg-color-alternate:var(--background-color-light);--horizontal-padding:3rem;--vertical-padding:1.5rem;}@media screen and (max-width: 768px) {:root{--horizontal-padding:1.5rem;}}*{margin:0;padding:0;list-style-type:none;text-decoration:none;line-height:150%;}html, body{width:100%;height:100%;font-family:var(--font-family-body);color:var(--fg-color);background-color:var(--bg-color);}a:link, a:visited, a:active, a:hover{color:var(--fg-color);}.wrapper-0-0-1{width:100%;height:100%;box-sizing:border-box;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;flex-direction:column;}.container-0-0-4{position:sticky;top:0;z-index:10;margin-bottom:var(--vertical-padding);}.link-0-0-5{display:flex;justify-content:space-between;align-items:center;}.name-0-0-6{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;font-size:1.618em;}.home-0-0-7{text-align:right;}.content-0-0-2{background-color:var(--background-color-medium);flex:0 0 auto;margin:0 auto var(--vertical-padding) auto;box-sizing:border-box;width:100%;max-width:800px;padding:var(--vertical-padding) var(--horizontal-padding);}.compact-0-0-3{padding:10px var(--horizontal-padding);margin:0 auto;}.heading1-0-0-31{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}@media screen and (max-width: 768px) {.heading1-0-0-31{font-size:2.618em;}}@media screen and (min-width: 769px) {.heading1-0-0-31{font-size:3em;}}.heading2-0-0-32{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}@media screen and (max-width: 768px) {.heading2-0-0-32{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading2-0-0-32{font-size:2.618em;}}.heading3-0-0-33{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading3-0-0-33{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading3-0-0-33{font-size:1.618em;}}.heading4-0-0-34{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading4-0-0-34{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading4-0-0-34{font-size:1.3em;}}.heading5-0-0-35{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading5-0-0-35{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading5-0-0-35{font-size:1.3em;}}.heading6-0-0-36{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading6-0-0-36{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading6-0-0-36{font-size:1.3em;}}.markdown-0-0-30 p{margin-top:var(--vertical-padding);}.markdown-0-0-30 blockquote{margin-top:var(--vertical-padding);background-color:var(--bg-color-alternate);color:var(--fg-color);padding:0.01em var(--horizontal-padding) var(--vertical-padding) var(--horizontal-padding);font-size:1.1em;margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 .image-wrapper{margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;margin-top:var(--vertical-padding);background-color:var(--pure-black);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:var(--vertical-padding) var(--horizontal-padding);}.markdown-0-0-30 pre code.hljs{margin-top:var(--vertical-padding);display:block;overflow-x:auto;padding:var(--vertical-padding) var(--horizontal-padding);margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 code.hljs{font-family:var(--font-family-code);padding:3px 5px;}.markdown-0-0-30 a:link, .markdown-0-0-30 a:hover, .markdown-0-0-30 a:visited, .markdown-0-0-30 a:active{text-decoration:underline;}.markdown-0-0-30 ul{margin-top:var(--vertical-padding);margin-left:25px;}.markdown-0-0-30 ol{margin-top:var(--vertical-padding);margin-left:25px;}.markdown-0-0-30 h1{margin-top:var(--vertical-padding);font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}.markdown-0-0-30 h2{margin-top:var(--vertical-padding);font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}.markdown-0-0-30 h3{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h4{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h5{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h6{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 hr{max-width:50%;display:block;text-align:center;margin:2em auto;}.markdown-0-0-30 iframe{margin-top:var(--vertical-padding);aspect-ratio:16 / 9;height:100%;margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 video{margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;margin-top:var(--vertical-padding);}.markdown-0-0-30 .hljs{color:#d5c4a1;background:#282828;}.markdown-0-0-30 .hljs ::selection, .markdown-0-0-30 .hljs::selection{background-color:#504945;color:#d5c4a1;}.markdown-0-0-30 .hljs-comment{color:#665c54;}.markdown-0-0-30 .hljs-tag{color:#bdae93;}.markdown-0-0-30 .hljs-operator, .markdown-0-0-30 .hljs-punctuation, .markdown-0-0-30 .hljs-subst{color:#d5c4a1;}.markdown-0-0-30 .hljs-operator{opacity:0.7;}.markdown-0-0-30 .hljs-bullet, .markdown-0-0-30 .hljs-deletion, .markdown-0-0-30 .hljs-name, .markdown-0-0-30 .hljs-selector-tag, .markdown-0-0-30 .hljs-template-variable, .markdown-0-0-30 .hljs-variable{color:#fb4934;}.markdown-0-0-30 .hljs-attr, .markdown-0-0-30 .hljs-link, .markdown-0-0-30 .hljs-literal, .markdown-0-0-30 .hljs-number, .markdown-0-0-30 .hljs-symbol, .markdown-0-0-30 .hljs-variable.constant_{color:#fe8019;}.markdown-0-0-30 .hljs-class .hljs-title, .markdown-0-0-30 .hljs-title, .markdown-0-0-30 .hljs-title.class_{color:#fabd2f;}.markdown-0-0-30 .hljs-strong{font-weight:700;color:#fabd2f;}.markdown-0-0-30 .hljs-addition, .markdown-0-0-30 .hljs-code, .markdown-0-0-30 .hljs-string, .markdown-0-0-30 .hljs-title.class_.inherited__{color:#b8bb26;}.markdown-0-0-30 .hljs-built_in, .markdown-0-0-30 .hljs-doctag, .markdown-0-0-30 .hljs-keyword.hljs-atrule, .markdown-0-0-30 .hljs-quote, .markdown-0-0-30 .hljs-regexp{color:#8ec07c;}.markdown-0-0-30 .hljs-attribute, .markdown-0-0-30 .hljs-function .hljs-title, .markdown-0-0-30 .hljs-section, .markdown-0-0-30 .hljs-title.function_, .markdown-0-0-30 .ruby .hljs-property{color:#83a598;}.markdown-0-0-30 .diff .hljs-meta, .markdown-0-0-30 .hljs-keyword, .markdown-0-0-30 .hljs-template-tag, .markdown-0-0-30 .hljs-type{color:#d3869b;}.markdown-0-0-30 .hljs-emphasis{color:#d3869b;font-style:italic;}.markdown-0-0-30 .hljs-meta, .markdown-0-0-30 .hljs-meta .hljs-keyword, .markdown-0-0-30 .hljs-meta .hljs-string{color:#d65d0e;}.markdown-0-0-30 .hljs-meta .hljs-keyword, .markdown-0-0-30 .hljs-meta-keyword{font-weight:700;}@media screen and (max-width: 768px) {.markdown-0-0-30 h6{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h6{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h5{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h5{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h4{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h4{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h3{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h3{font-size:1.618em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h2{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h2{font-size:2.618em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h1{font-size:2.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h1{font-size:3em;}}.markdown-0-0-30 ol li{margin-top:0.75rem;list-style-type:decimal;}.markdown-0-0-30 ol ol{margin-top:0;}.markdown-0-0-30 ol li::marker{color:var(--foreground-color-medium);}.markdown-0-0-30 ul li{margin-top:0.75rem;list-style-type:disc;}.markdown-0-0-30 ul ul{margin-top:0;}.markdown-0-0-30 ul li::marker{color:var(--foreground-color-dark);}.markdown-0-0-30 .image-wrapper img{display:block;max-width:100%;max-height:50vh;}.markdown-0-0-30 .image-wrapper .image-title{margin-top:0.5rem;color:var(--fg-color);text-align:center;}.linkSet-0-0-37{margin-top:var(--vertical-padding);}.link-0-0-38{margin-right:5px;}.technologies-0-0-13{clear:both;margin-top:var(--vertical-padding);}.compact-0-0-14{margin-top:0;}.technology-0-0-15{float:left;border-radius:5px;font-size:0.707em;margin:5px;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;}.tagRed-0-0-16{background-color:var(--highlight-color);}.tagGreen-0-0-17{background-color:var(--highlight-color-2);}.icon-0-0-18{color:var(--fg-color);margin:0 5px;}.tag-0-0-19{background-color:var(--bg-color-alternate);padding:5px;border-radius:5px;}</style></head><body><div class="wrapper-0-0-1"><div class="container-0-0-4"><div class="content-0-0-2 compact-0-0-3"><a href="/" class="link-0-0-5"><header class="name-0-0-6">Ben Coveney</header><nav class="home-0-0-7">Home <i class="mdi mdi-home"></i></nav></a></div></div><div class="content-0-0-2"><h1 class="heading1-0-0-31">Falsy React Elements</h1><span class="published-0-0-39">Published <!-- -->Mar 30, 2024</span><div class="markdown-0-0-30"><p>If you were to render this React component, what would you expect to see?</p>
<pre><code class="hljs language-TypeScript"><span class="hljs-keyword">const</span> someValue = -<span class="hljs-number">1</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">props: {}</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{someValue &gt; 0 &amp;&amp; &quot;Hello World&quot;}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>If you have been programming in React for a while, you&#x27;re probably familiar with components like this, and you&#x27;d expect just to see an empty <code>&lt;div&gt;&lt;/div&gt;</code> block in your page.</p>
<p>But something is happening here that isn&#x27;t 100% obvious. The expression inside those curly braces will evaluate to a value, <code>false</code>, so why do we not see <code>false</code> rendered inside the div?</p>
<p>If you throw the example into the <a href="https://www.typescriptlang.org/play">TypeScript playground</a>, you can see that when this JSX is compiled down to JavaScript the condition is preserved:</p>
<pre><code class="hljs language-JavaScript"><span class="hljs-meta">&quot;use strict&quot;</span>;
<span class="hljs-keyword">const</span> someValue = -<span class="hljs-number">1</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;div&quot;</span>, <span class="hljs-literal">null</span>, someValue &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-string">&quot;Hello World&quot;</span>);
}
</code></pre>
<p>So when this is evaluated at run-time, the condition would be evaluated and the <code>false</code> value will be passed on to React&#x27;s <code>createElement</code> function as the 3rd argument.</p>
<p>Looking at <a href="https://react.dev/reference/react/createElement">the documentation for <code>createElement</code></a>, we can see that this 3rd argument is for the <code>children</code> of the (<code>div</code>) component:</p>
<p><figure class="image-wrapper"><a href="/posts/react-false-create-element.png"><img src="/posts/react-false-create-element.png" alt="React documentation for createElement" title="React documentation for createElement"/></a><figcaption class="image-title">React documentation for createElement</figcaption></figure></p>
<p>Reading on, we can find description of the <code>children</code> parameter:</p>
<blockquote>
<p><strong>optional</strong> <code>...children</code>: Zero or more child nodes. They can be any React nodes, including React elements, strings, numbers, portals, empty nodes (<code>null</code>, <code>undefined</code>, <code>true</code>, and <code>false</code>), and arrays of React nodes.</p>
</blockquote>
<p>So from here we can see <code>false</code> is considered an &quot;empty node&quot;, as will <code>null</code>, <code>undefined</code> and <code>true</code>. The first time I saw this I was slightly surprised that <code>true</code> was being treated in a similar way to <code>false</code> - I would&#x27;ve assumed that:</p>
<ul>
<li>Any falsy values are omitted from the output.</li>
<li>Any truthy values are included in the output.</li>
</ul>
<p>This is trivial to test though, for example using a <a href="https://playcode.io/react">React playground</a>:</p>
<p><figure class="image-wrapper"><a href="/posts/react-false-playground.png"><img src="/posts/react-false-playground.png" alt="Confirmation that all &quot;empty nodes&quot; are not rendered" title="Confirmation that all &quot;empty nodes&quot; are not rendered"/></a><figcaption class="image-title">Confirmation that all &quot;empty nodes&quot; are not rendered</figcaption></figure></p>
<p>This is reflected in the <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/fdd07f6b9411bb571f31759799762e690214025d/types/react/index.d.ts#L478">TypeScript types for React</a> as well:</p>
<pre><code class="hljs language-TypeScript"><span class="hljs-comment">/**
 * Represents all of the things React can render.
 *
 * Where {<span class="hljs-doctag">@link</span> ReactElement} only represents JSX, `ReactNode` represents everything that can be rendered.
 *
 * [...]
 */</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactNode</span> =
    | <span class="hljs-title class_">ReactElement</span>
    | <span class="hljs-built_in">string</span>
    | <span class="hljs-built_in">number</span>
    | <span class="hljs-title class_">Iterable</span>&lt;<span class="hljs-title class_">ReactNode</span>&gt;
    | <span class="hljs-title class_">ReactPortal</span>
    | <span class="hljs-built_in">boolean</span>
    | <span class="hljs-literal">null</span>
    | <span class="hljs-literal">undefined</span>
    | <span class="hljs-variable constant_">DO_NOT_USE_OR_YOU_WILL_BE_FIRED_EXPERIMENTAL_REACT_NODES</span>[
        keyof <span class="hljs-variable constant_">DO_NOT_USE_OR_YOU_WILL_BE_FIRED_EXPERIMENTAL_REACT_NODES</span>
    ];
</code></pre>
<p>If you want even more confirmation, React is open source and you can take a look at the code yourself. I think <a href="https://github.com/facebook/react/blob/7022e8d6a3222c97d287dfa0f2361acc8a30683a/packages/react/src/ReactChildren.js#L86">this</a> is the place where react handles those empty nodes. <code>undefined</code>, <code>true</code> and <code>false</code> are mapped to <code>null</code>, and then checks on subsequent lines prevent any rendering for <code>null</code> elements.</p></div><div class="linkSet-0-0-37"></div><ul class="technologies-0-0-13"><li class="technology-0-0-15 tagGreen-0-0-17"><i class="icon-0-0-18 mdi mdi-lead-pencil mdi-18px"></i><span class="tag-0-0-19">Writing</span></li><li class="technology-0-0-15 tagRed-0-0-16"><i class="icon-0-0-18 mdi mdi-language-typescript mdi-18px"></i><span class="tag-0-0-19">TypeScript</span></li><li class="technology-0-0-15 tagRed-0-0-16"><i class="icon-0-0-18 mdi mdi-react mdi-18px"></i><span class="tag-0-0-19">React</span></li></ul></div></div></body></html>