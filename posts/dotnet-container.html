<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>.Net Web App Boilerplate - Ben Coveney&#x27;s Blog</title><meta name="description" content="A boilerplate web app project using containers, C# and TypeScript"/><meta name="author" content="Ben Coveney"/><link rel="icon" type="image/png" href="https://emojifavicon.dev/favicons/1f4bb.png"/><link rel="shortcut icon" type="image/x-icon" href="https://emojifavicon.dev/favicons/1f4bb.ico"/><link rel="canonical" href="https://bencoveney.com/posts/dotnet-container.html"/><link href="https://cdn.materialdesignicons.com/2.2.43/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css"/><link rel="alternate" type="application/atom+xml" title="Ben Coveney&#x27;s Blog" href="/feed.xml"/><meta property="og:title" content=".Net Web App Boilerplate - Ben Coveney&#x27;s Blog"/><meta property="og:type" content="article"/><meta property="og:image" content="/posts/dotnet-container-structure.png"/><meta property="og:url" content="https://bencoveney.com/posts/dotnet-container.html"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:description" content="A boilerplate web app project using containers, C# and TypeScript"/><meta property="og:site_name" content="Ben Coveney&#x27;s Blog"/><style>.published-0-0-39{margin-top:1rem;font-style:italic;font-size:0.707em;text-align:center;width:100%;display:inline-block;}:root{--font-family-sans-serif:-apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Cantarell, Ubuntu, roboto, noto, arial, sans-serif;--font-family-serif:Iowan Old Style, Apple Garamond, Baskerville, Times New Roman, Droid Serif, Times, Source Serif Pro, serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, serif;--font-family-mono:Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace;--font-family-body:var(--font-family-sans-serif);--font-family-heading:var(--font-family-serif);--font-family-code:var(--font-family-mono);--background-color-dark:hsl(238, 6%, 4%);--foreground-color-dark:hsl(238, 6%, 50%);--background-color-medium:hsl(238, 6%, 8%);--foreground-color-medium:hsl(238, 6%, 57%);--background-color-light:hsl(238, 6%, 14%);--foreground-color-light:hsl(238, 6%, 86%);--highlight-color:rgb(180, 20, 20);--highlight-color-2:rgb(181, 105, 19);--pure-black:hsl(0, 0%, 0%);--fg-color:var(--foreground-color-light);--bg-color:var(--background-color-dark);--bg-color-alternate:var(--background-color-light);--horizontal-padding:3rem;--vertical-padding:1.5rem;}@media screen and (max-width: 768px) {:root{--horizontal-padding:1.5rem;}}*{margin:0;padding:0;list-style-type:none;text-decoration:none;line-height:150%;}html, body{width:100%;height:100%;font-family:var(--font-family-body);color:var(--fg-color);background-color:var(--bg-color);}a:link, a:visited, a:active, a:hover{color:var(--fg-color);}.wrapper-0-0-1{width:100%;height:100%;box-sizing:border-box;position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;display:flex;flex-direction:column;}.container-0-0-4{position:sticky;top:0;z-index:10;margin-bottom:var(--vertical-padding);}.link-0-0-5{display:flex;justify-content:space-between;align-items:center;}.name-0-0-6{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;font-size:1.618em;}.home-0-0-7{text-align:right;}.content-0-0-2{background-color:var(--background-color-medium);flex:0 0 auto;margin:0 auto var(--vertical-padding) auto;box-sizing:border-box;width:100%;max-width:800px;padding:var(--vertical-padding) var(--horizontal-padding);}.compact-0-0-3{padding:10px var(--horizontal-padding);margin:0 auto;}.heading1-0-0-31{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}@media screen and (max-width: 768px) {.heading1-0-0-31{font-size:2.618em;}}@media screen and (min-width: 769px) {.heading1-0-0-31{font-size:3em;}}.heading2-0-0-32{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}@media screen and (max-width: 768px) {.heading2-0-0-32{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading2-0-0-32{font-size:2.618em;}}.heading3-0-0-33{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading3-0-0-33{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading3-0-0-33{font-size:1.618em;}}.heading4-0-0-34{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading4-0-0-34{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading4-0-0-34{font-size:1.3em;}}.heading5-0-0-35{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading5-0-0-35{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading5-0-0-35{font-size:1.3em;}}.heading6-0-0-36{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}@media screen and (max-width: 768px) {.heading6-0-0-36{font-size:1.618em;}}@media screen and (min-width: 769px) {.heading6-0-0-36{font-size:1.3em;}}.markdown-0-0-30 p{margin-top:var(--vertical-padding);}.markdown-0-0-30 blockquote{margin-top:var(--vertical-padding);background-color:var(--bg-color-alternate);color:var(--fg-color);padding:0.01em var(--horizontal-padding) var(--vertical-padding) var(--horizontal-padding);font-size:1.1em;margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 .image-wrapper{margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;margin-top:var(--vertical-padding);background-color:var(--pure-black);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:var(--vertical-padding) var(--horizontal-padding);}.markdown-0-0-30 pre code.hljs{margin-top:var(--vertical-padding);display:block;overflow-x:auto;padding:var(--vertical-padding) var(--horizontal-padding);margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 code.hljs{font-family:var(--font-family-code);padding:3px 5px;}.markdown-0-0-30 a:link, .markdown-0-0-30 a:hover, .markdown-0-0-30 a:visited, .markdown-0-0-30 a:active{text-decoration:underline;}.markdown-0-0-30 ul{margin-top:var(--vertical-padding);margin-left:25px;}.markdown-0-0-30 ol{margin-top:var(--vertical-padding);margin-left:25px;}.markdown-0-0-30 h1{margin-top:var(--vertical-padding);font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}.markdown-0-0-30 h2{margin-top:var(--vertical-padding);font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;display:block;text-align:center;}.markdown-0-0-30 h3{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h4{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h5{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 h6{font-family:var(--font-family-heading);font-weight:100;position:relative;line-height:120%;margin-top:var(--vertical-padding);}.markdown-0-0-30 hr{max-width:50%;display:block;text-align:center;margin:2em auto;}.markdown-0-0-30 iframe{margin-top:var(--vertical-padding);aspect-ratio:16 / 9;height:100%;margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;}.markdown-0-0-30 video{margin-left:calc(var(--horizontal-padding) * -1);margin-right:calc(var(--horizontal-padding) * -1);--double-margin:calc(var(--horizontal-padding) * 2);width:calc(100% + var(--double-margin));box-sizing:border-box;margin-top:var(--vertical-padding);}.markdown-0-0-30 .hljs{color:#d5c4a1;background:#282828;}.markdown-0-0-30 .hljs ::selection, .markdown-0-0-30 .hljs::selection{background-color:#504945;color:#d5c4a1;}.markdown-0-0-30 .hljs-comment{color:#665c54;}.markdown-0-0-30 .hljs-tag{color:#bdae93;}.markdown-0-0-30 .hljs-operator, .markdown-0-0-30 .hljs-punctuation, .markdown-0-0-30 .hljs-subst{color:#d5c4a1;}.markdown-0-0-30 .hljs-operator{opacity:0.7;}.markdown-0-0-30 .hljs-bullet, .markdown-0-0-30 .hljs-deletion, .markdown-0-0-30 .hljs-name, .markdown-0-0-30 .hljs-selector-tag, .markdown-0-0-30 .hljs-template-variable, .markdown-0-0-30 .hljs-variable{color:#fb4934;}.markdown-0-0-30 .hljs-attr, .markdown-0-0-30 .hljs-link, .markdown-0-0-30 .hljs-literal, .markdown-0-0-30 .hljs-number, .markdown-0-0-30 .hljs-symbol, .markdown-0-0-30 .hljs-variable.constant_{color:#fe8019;}.markdown-0-0-30 .hljs-class .hljs-title, .markdown-0-0-30 .hljs-title, .markdown-0-0-30 .hljs-title.class_{color:#fabd2f;}.markdown-0-0-30 .hljs-strong{font-weight:700;color:#fabd2f;}.markdown-0-0-30 .hljs-addition, .markdown-0-0-30 .hljs-code, .markdown-0-0-30 .hljs-string, .markdown-0-0-30 .hljs-title.class_.inherited__{color:#b8bb26;}.markdown-0-0-30 .hljs-built_in, .markdown-0-0-30 .hljs-doctag, .markdown-0-0-30 .hljs-keyword.hljs-atrule, .markdown-0-0-30 .hljs-quote, .markdown-0-0-30 .hljs-regexp{color:#8ec07c;}.markdown-0-0-30 .hljs-attribute, .markdown-0-0-30 .hljs-function .hljs-title, .markdown-0-0-30 .hljs-section, .markdown-0-0-30 .hljs-title.function_, .markdown-0-0-30 .ruby .hljs-property{color:#83a598;}.markdown-0-0-30 .diff .hljs-meta, .markdown-0-0-30 .hljs-keyword, .markdown-0-0-30 .hljs-template-tag, .markdown-0-0-30 .hljs-type{color:#d3869b;}.markdown-0-0-30 .hljs-emphasis{color:#d3869b;font-style:italic;}.markdown-0-0-30 .hljs-meta, .markdown-0-0-30 .hljs-meta .hljs-keyword, .markdown-0-0-30 .hljs-meta .hljs-string{color:#d65d0e;}.markdown-0-0-30 .hljs-meta .hljs-keyword, .markdown-0-0-30 .hljs-meta-keyword{font-weight:700;}@media screen and (max-width: 768px) {.markdown-0-0-30 h6{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h6{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h5{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h5{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h4{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h4{font-size:1.3em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h3{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h3{font-size:1.618em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h2{font-size:1.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h2{font-size:2.618em;}}@media screen and (max-width: 768px) {.markdown-0-0-30 h1{font-size:2.618em;}}@media screen and (min-width: 769px) {.markdown-0-0-30 h1{font-size:3em;}}.markdown-0-0-30 ol li{margin-top:0.75rem;list-style-type:decimal;}.markdown-0-0-30 ol ol{margin-top:0;}.markdown-0-0-30 ol li::marker{color:var(--foreground-color-medium);}.markdown-0-0-30 ul li{margin-top:0.75rem;list-style-type:disc;}.markdown-0-0-30 ul ul{margin-top:0;}.markdown-0-0-30 ul li::marker{color:var(--foreground-color-dark);}.markdown-0-0-30 .image-wrapper img{display:block;max-width:100%;max-height:50vh;}.markdown-0-0-30 .image-wrapper .image-title{margin-top:0.5rem;color:var(--fg-color);text-align:center;}.linkSet-0-0-37{margin-top:var(--vertical-padding);}.link-0-0-38{margin-right:5px;}.technologies-0-0-13{clear:both;margin-top:var(--vertical-padding);}.compact-0-0-14{margin-top:0;}.technology-0-0-15{float:left;border-radius:5px;font-size:0.707em;margin:5px;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;}.tagRed-0-0-16{background-color:var(--highlight-color);}.tagGreen-0-0-17{background-color:var(--highlight-color-2);}.icon-0-0-18{color:var(--fg-color);margin:0 5px;}.tag-0-0-19{background-color:var(--bg-color-alternate);padding:5px;border-radius:5px;}</style></head><body><div class="wrapper-0-0-1"><div class="container-0-0-4"><div class="content-0-0-2 compact-0-0-3"><a href="/" class="link-0-0-5"><header class="name-0-0-6">Ben Coveney</header><nav class="home-0-0-7">Home <i class="mdi mdi-home"></i></nav></a></div></div><div class="content-0-0-2"><h1 class="heading1-0-0-31">.Net Web App Boilerplate</h1><span class="published-0-0-39">Published <!-- -->Apr 15, 2024</span><div class="markdown-0-0-30"><p>If you&#x27;ve seen many of the other pages on this blog, you might&#x27;ve noticed that I typically stick to front-end projects (TypeScript, CSS, HTML). This is less that I am unfamiliar or uncomfortable with backend technologies, and more because I find the visual/tactile nature of front-end development more rewarding. It helps that Github Pages make it easy to get a static website created and published quickly at 0 cost.</p>
<p>There are, however, some cases where it would be useful to have a backend component available. I have some project ideas where a server-side component would be useful, and it would&#x27;ve also been useful during my recent job hunt to have some evidence of familiarity with backend tools, technologies and workflows.</p>
<p>With this in mind, I decided I would try and create some boilerplate for a simple full-stack application. I wanted a minimal project structure, which defines just enough parts to be useful jumping off point, while allowing bits to be chopped and changed depending on whatever project I decide to build. I also wanted to demonstrate proficiency at configuring CI, containers, networking, and all the parts necessary to hook a full-stack project together. I opted to keep the list of dependencies as small as possible, in the hope that it will be easier to keep the project up-to-date without too much hassle.</p>
<h2>Application Architecture</h2>
<p><figure class="image-wrapper"><a href="/posts/dotnet-container-structure.png"><img src="/posts/dotnet-container-structure.png" alt="The application architecture" title="The application architecture"/></a><figcaption class="image-title">The application architecture</figcaption></figure></p>
<p>On the server side I opted for C#, given it is the technology I have the most familiarity with. I think this chunk of the app best-achieves the flexibility goal: The only real requirement of container is that it starts a server listening on port 5000. This will make it really easy to swap out in the future, if I want to try out a different programming language for example.</p>
<p>I was less sure of how I wanted to structure the front-end of the project. I wanted to be able to support pivoting to a range of project structures:</p>
<ul>
<li>A single-page app where the front-end is built using a framework like React. In that case</li>
<li>A server-rendered app where the a lot of the content is rendered ahead of time.</li>
<li>An entirely server-driven app, using a tool like HTMX to add front-end interactivity.</li>
</ul>
<p>I also needed to consider what the network entrypoint to my app would look like, as different cloud/PAAS providers will have different capabilities in terms of load balancers and certificate management.</p>
<p>Another factor to think about was how the compiled UI would be hosted. I wanted a solution that didn&#x27;t use additional dependencies for now, but I know it isn&#x27;t uncommon for bundled UI assets to be hosted in a simple file store like S3, or as build artifacts on a CI server.</p>
<p>In the end the UI container is a bit of a grab-bag of functionality. At its core there is an NGINX server acting as a server for the static assets and a proxy for the API. The upside of this is that the number of moving parts are low, and the amount of configuration I need to do for those parts is small. If, in the future on a specific project, it makes sense to migrate to a different architecture (for example using AWS S3 for assets and AWS ALBs for load balancing) then it is no great loss to throw away the UI container and start afresh.</p>
<p>The UI is bundled together using <a href="https://esbuild.github.io/">ESBuild</a>, which helps keep (transitive) dependencies down while still providing support for TypeScript, CSS and a pleasant developer experience.</p>
<p>The local development experience involved running the component parts (API server and UI dev server) directly on your machine, as opposed to in their containers. In the event you want to adopt, test or debug a containerised configuration, there&#x27;s a <code>docker-compose.yml</code> file pre-configured and ready to run.</p>
<h2>Deployment</h2>
<p>In order to prove out the cloud compatibility of the project, I wanted to get it up and running on a cloud service. I opted for AWS lightsail, because it is quick and easy to configure, and most importantly is included in AWS&#x27; free tier!</p>
<p><figure class="image-wrapper"><a href="/posts/dotnet-container-lightsail.png"><img src="/posts/dotnet-container-lightsail.png" alt="The deployed application on Lightsail" title="The deployed application on Lightsail"/></a><figcaption class="image-title">The deployed application on Lightsail</figcaption></figure></p>
<p>The container images are built in CI using Github Actions and automatically posted to Github Packages Container Registry, ready for deployment.</p>
<h2>Round Up</h2>
<p>I think I&#x27;ve met my original goals for the project at this point, but time will tell how adaptable this boilerplate is for future projects.</p>
<p>Part of the balance I have tried to strike is delivering a good baseline without bloating the project with lots of opinionated tooling and dependency decisions. With that said, there are still some ideas for enhancements I&#x27;m considering for the future:</p>
<ul>
<li>Adding a database like PostgreSQL.</li>
<li>Extending the app with some minimal functionality, so that the demo is a little less underwhelming.</li>
<li>Adding deployment instructions for other cloud providers, to help validate that the architecture isn&#x27;t tied to a single cloud host.</li>
<li>Add a barebones test framework, with CI integration.</li>
</ul></div><div class="linkSet-0-0-37"><a href="https://container-service-1.19iaj1mj95gdk.eu-west-2.cs.amazonlightsail.com/" class="link-0-0-38"><i class="mdi mdi-web mdi-18px"></i> View website</a><a href="https://github.com/bencoveney/dotnet-container" class="link-0-0-38"><i class="mdi mdi-github-circle mdi-18px"></i> View on Github</a></div><ul class="technologies-0-0-13"><li class="technology-0-0-15 tagGreen-0-0-17"><i class="icon-0-0-18 mdi mdi-cube mdi-18px"></i><span class="tag-0-0-19">Project</span></li><li class="technology-0-0-15 tagRed-0-0-16"><i class="icon-0-0-18 mdi mdi-language-typescript mdi-18px"></i><span class="tag-0-0-19">TypeScript</span></li><li class="technology-0-0-15 tagRed-0-0-16"><i class="icon-0-0-18 mdi mdi-server-network mdi-18px"></i><span class="tag-0-0-19">Continuous Integration</span></li><li class="technology-0-0-15 tagRed-0-0-16"><i class="icon-0-0-18 mdi mdi-language-csharp mdi-18px"></i><span class="tag-0-0-19">C#</span></li></ul></div></div></body></html>